# 车辆速度检测App - 快速开始指南

## 第一步：安装依赖

### Windows用户
```bash
# 创建虚拟环境（推荐）
python -m venv venv

# 激活虚拟环境
venv\Scripts\activate

# 安装依赖
pip install -r requirements.txt
```

### Linux/Mac用户
```bash
# 创建虚拟环境（推荐）
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt
```

## 第二步：运行应用

### Windows用户
双击运行 `run_app.bat` 或在命令行中：
```bash
python app.py
```

### Linux/Mac用户
```bash
chmod +x run_app.sh
./run_app.sh
```

或者直接运行：
```bash
python app.py
```

## 第三步：使用应用

1. **启动应用后**，等待模型加载完成（首次运行会自动下载YOLO模型，约6MB）

2. **点击"开始检测"**按钮，应用会请求摄像头权限

3. **标定速度**（重要！）：
   - 点击"标定"按钮
   - 在画面中选择一个已知长度的参考物（如标准车道宽度3.75米）
   - 测量该参考物在画面中的像素距离
   - 输入实际距离（米）和像素距离
   - 点击"确定"完成标定

4. **开始检测**：
   - 将摄像头对准道路上的车辆
   - 应用会自动检测车辆并显示速度
   - 速度会实时显示在屏幕上

5. **停止检测**：点击"停止检测"按钮

## 常见问题

### Q: 摄像头无法打开？
A: 
- 检查是否授予了摄像头权限
- 确保没有其他应用占用摄像头
- 尝试重启应用

### Q: 速度显示不准确？
A: 
- 确保标定准确（使用已知长度的参考物）
- 保持手机位置相对固定
- 确保参考物与车辆在同一平面上

### Q: 检测不到车辆？
A: 
- 确保光线充足
- 车辆距离不要太远
- 检查摄像头是否对焦

### Q: 应用运行很卡？
A: 
- 降低帧率设置（点击"设置"按钮）
- 关闭其他应用释放内存
- 使用性能更好的设备

## 在Android上运行

### 方法1：使用Buildozer（推荐）

1. 安装Buildozer：
```bash
pip install buildozer
```

2. 安装Android依赖（Linux/Mac）：
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install -y git zip unzip openjdk-8-jdk python3-pip autoconf libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libtinfo5 cmake libffi-dev libssl-dev

# macOS
brew install autoconf automake libtool pkg-config
brew install libffi openssl
```

3. 打包APK：
```bash
buildozer android debug
```

4. 安装到手机：
```bash
# 通过USB连接手机并启用USB调试
adb install bin/vehiclespeed-0.1-arm64-v8a-debug.apk
```

### 方法2：使用Kivy Launcher

1. 从Google Play安装Kivy Launcher
2. 将项目文件夹复制到手机
3. 在Kivy Launcher中选择项目运行

## 技术说明

- **检测模型**：YOLOv8n（轻量级，适合移动设备）
- **跟踪算法**：Kalman滤波
- **速度计算**：基于像素位移和帧率
- **支持设备**：Android、iOS、Windows、Linux、macOS

## 注意事项

⚠️ **重要提示**：
- 速度计算需要准确的标定，请务必使用已知长度的参考物进行标定
- 标定后保持手机位置相对固定，移动手机会影响精度
- 本应用仅用于学习和研究目的，实际使用时请谨慎

## 获取帮助

如遇到问题，请查看 `README_APP.md` 获取更详细的文档。

