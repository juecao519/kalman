# 📱 打包步骤 - 快速指南

## 🎯 你的GitHub仓库
**仓库地址：** https://github.com/juecao519/kalman.git

---

## 📋 第一步：推送代码到GitHub

在项目根目录（Kalman文件夹）执行以下命令：

```bash
# 1. 初始化git（如果还没有）
git init

# 2. 添加所有文件
git add .

# 3. 提交代码
git commit -m "Add vehicle speed detection app"

# 4. 添加远程仓库（如果还没有添加）
git remote add origin https://github.com/juecao519/kalman.git

# 5. 推送到GitHub
git branch -M main
git push -u origin main
```

**注意：** 如果远程仓库已存在，可能需要先拉取：
```bash
git pull origin main --allow-unrelated-histories
```

---

## 🚀 第二步：触发GitHub Actions自动打包

### 方法1：自动触发（推荐）

代码推送后，GitHub Actions会自动检测到 `.github/workflows/build-apk.yml` 文件并开始构建。

### 方法2：手动触发

1. 进入GitHub仓库：https://github.com/juecao519/kalman
2. 点击顶部的 **"Actions"** 标签
3. 在左侧选择 **"Build Android APK"** 工作流
4. 点击右侧的 **"Run workflow"** 按钮
5. 选择分支（main）并点击 **"Run workflow"**

---

## ⏱️ 第三步：等待构建完成

- **首次构建**：约 30-40 分钟（需要下载Android SDK和所有依赖）
- **后续构建**：约 15-20 分钟（使用缓存，更快）

### 查看构建进度

1. 在GitHub仓库页面，点击 **"Actions"** 标签
2. 点击正在运行的工作流
3. 可以看到实时的构建日志

---

## 📦 第四步：下载APK

构建完成后：

1. 在Actions页面，找到已完成的构建（绿色✅）
2. 滚动到页面底部，找到 **"Artifacts"** 部分
3. 点击 **"app-debug-apk"** 下载
4. 解压ZIP文件，得到APK文件

**APK文件名格式：** `vehiclespeed-0.1-arm64-v8a-debug.apk` 或 `vehiclespeed-0.1-armeabi-v7a-debug.apk`

---

## 📱 第五步：安装到手机

### 方法1：直接安装

1. 将APK文件传输到手机（USB、微信、QQ等）
2. 在手机上打开APK文件
3. 允许"安装未知来源的应用"
4. 点击安装

### 方法2：使用ADB安装

```bash
# 连接手机并启用USB调试
adb install vehiclespeed-0.1-arm64-v8a-debug.apk
```

---

## ⚠️ 重要提示

### 1. 确保模型文件已包含

检查 `yolov8n.pt` 文件是否在项目根目录（与 `app.py` 同级）

### 2. 如果构建失败

查看构建日志中的错误信息，常见问题：
- 模型文件未找到 → 确保 `yolov8n.pt` 已提交
- 依赖安装失败 → 检查 `requirements.txt`
- 权限问题 → 检查 `buildozer.spec` 中的权限配置

### 3. 文件太大无法推送

如果 `yolov8n.pt` 文件太大，GitHub可能拒绝。可以：
- 使用Git LFS：`git lfs track "*.pt"`
- 或者首次运行时自动下载模型（需要修改代码）

---

## 🔄 后续更新

每次修改代码后：

```bash
git add .
git commit -m "更新说明"
git push origin main
```

GitHub Actions会自动触发新的构建。

---

## 📞 需要帮助？

- 查看详细文档：`云打包指南.md`
- 快速开始：`云打包快速开始.md`
- 构建日志：GitHub Actions页面

---

## ✅ 检查清单

在推送前，确认：

- [ ] `yolov8n.pt` 文件在项目根目录
- [ ] `.github/workflows/build-apk.yml` 文件存在
- [ ] `buildozer.spec` 配置正确
- [ ] 所有Python文件已包含
- [ ] `requirements.txt` 包含所有依赖

---

**准备好了吗？开始推送代码吧！** 🚀

